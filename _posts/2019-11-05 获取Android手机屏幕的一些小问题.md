---
layout: post
title:  â€œè·å–Androidæ‰‹æœºå±å¹•çš„ä¸€äº›å°é—®é¢˜!"
date:   2018-11-05 15:30:00
categories: link
banner_image: li_18_11_05.jpg
comments: true
---

åœ¨åš `PopupWindow` ä»æŒ‡å®šä½ç½®å¼¹å‡ºçš„å¹¶å æ»¡å…¨å±çš„äº§å“éœ€æ±‚è¿‡ç¨‹ä¸­ï¼Œå‘ç°`PopupWindow`çš„xmlå¦‚æœè®¾ç½®äº†match_parentåˆ™ä¼šå‡ºç°PopupWindowå¼¹å‡ºä½ç½®ä¸å¯¹ã€‚æ‰€ä»¥å°±è½¬å»è®¡ç®—å±å¹•çš„é«˜åº¦ç„¶ååŠ¨æ€è®¾ç½®`PopupWindow`çš„é«˜åº¦ã€‚æœ¬æ¥ä»¥ä¸ºå¾ˆç®€å•ï¼Œç„¶åä¸¤ä¸‹å®ç°äº†ï¼Œå‘ç°å¼€å‘æœº(SAMSUNG-S10)æ²¡é—®é¢˜å°±ç›´æ¥æ‰“åŒ…ç»™æµ‹è¯•ğŸ™ƒ,ç»“æœå‘ç°åœ¨å°ç±³æœºå‹ä¸Š`PopupWindow`å¼¹å‡ºåæœ€ä¸‹é¢æ¼å‡ºä¸€æ¡å ä¸æ»¡ä¸€å±å¹•ã€‚æ‰å‘ç°ä¸€ä¸ªç®€å•çš„è®¡ç®—å±å¹•é«˜åº¦ä¸æ˜¯é‚£ä¹ˆç®€å•ã€‚äºæ˜¯ä¹è‡ªå·±ç»è¿‡ç ”ç©¶è§£å†³äº†å¤§éƒ¨åˆ†é—®é¢˜ï¼Œç‰¹æ­¤åˆ™æ¥æ€»ç»“ä¸‹ã€‚

### è·å–ç›¸å…³å±å¹•å‚æ•°çš„ä»£ç 

```java
public class ScreenInfoUtils {

    private static final String TAG = "ScreenInfoUtils";
    
    /**
     * Get Screen Height
     */
    public static int getScreenHeight(Context context) {
        return getDisplayMetrics(context).heightPixels;
    }


    /**
     * Get Screen Real Height
     *
     * @param context Context
     * @return Real Height
     */
    public static int getRealHeight(Context context) {
        Display display = getDisplay(context);
        if (display == null) {
            return 0;
        }
        DisplayMetrics dm = new DisplayMetrics();
        display.getRealMetrics(dm);
        return dm.heightPixels;
    }
    
    /**
     * Get StatusBar Height
     */
    public static int getStatusBarHeight(Context mContext) {
        int resourceId = mContext.getResources().getIdentifier("status_bar_height", "dimen", "android");
        if (resourceId > 0) {
            return mContext.getResources().getDimensionPixelSize(resourceId);
        }
        return 0;
    }

    /**
     * Get ActionBar Height
     */
    public static int getActionBarHeight(Context mContext) {
        TypedValue tv = new TypedValue();
        if (mContext.getTheme().resolveAttribute(android.R.attr.actionBarSize, tv, true)) {
            return TypedValue.complexToDimensionPixelSize(tv.data, mContext.getResources().getDisplayMetrics());
        }
        return 0;
    }

    /**
     * Get NavigationBar Height
     */
    public static int getNavigationBarHeight(Context mContext) {
        Resources resources = mContext.getResources();
        int resourceId = resources.getIdentifier("navigation_bar_height", "dimen", "android");
        if (resourceId > 0) {
            return resources.getDimensionPixelSize(resourceId);
        }
        return 0;
    }

    /**
     * Get Density
     */
    private static float getDensity(Context context) {
        return getDisplayMetrics(context).density;
    }

    /**
     * Get Dpi
     */
    private static int getDpi(Context context) {
        return getDisplayMetrics(context).densityDpi;
    }

    /**
     * Get Display
     *
     * @param context Context for get WindowManager
     * @return Display
     */
    private static Display getDisplay(Context context) {
        WindowManager wm;
        if (context instanceof Activity) {
            Activity activity = (Activity) context;
            wm = activity.getWindowManager();
        } else {
            wm = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
        }
        if (wm != null) {
            return wm.getDefaultDisplay();
        }
        return null;
    }

    /**
     * Get DisplayMetrics
     *
     * @param context Context for get Resources
     * @return DisplayMetrics
     */
    private static DisplayMetrics getDisplayMetrics(Context context) {
        return context.getResources().getDisplayMetrics();
    }


    public static boolean isNavigationBarExist(Activity activity) {
        ViewGroup vp = (ViewGroup) activity.getWindow().getDecorView();
        if (null != vp) {
            for (int i = 0; i < vp.getChildCount(); i++) {
                if (vp.getChildAt(i).getId() != View.NO_ID &&
                        "navigationBarBackground".equals(activity.getResources().getResourceEntryName(vp.getChildAt(i).getId()))) {
                    return true;
                }
            }
        }
        return false;
    }
    
}
```

åœ¨è¿™é‡Œæˆ‘ä»¬å°±æ¥çœ‹ä¸‹è·çš„é«˜åº¦ç›¸å…³å‚æ•°ã€‚

| æœºå‹       | çœŸå®é«˜åº¦   |é«˜åº¦|  çŠ¶æ€æ é«˜åº¦| å¯¼èˆªæ é«˜åº¦| æ˜¯å¦æ˜¾ç¤ºå¯¼èˆªæ é«˜åº¦|
| :-: | :-: |:-: |:-: |:-: |:-: |
| `SAMSUMG-S10`|  3040px |   2838px     |   150px    |    168px   |true|
| `Redmi Note 5`| 2160px |   2030px     |    66px   |   130px    | false     |
| `Mi 8`    | <font color = red>2248px</font>  |  <font color = blue>2029px</font>     |    <font color = blue>89px</font>   |   <font color = blue>130px</font>    |  false     |
| `OPPO`     |   2340px   |   2340px    |  84px     |   132px    |  false     |

æœ¬æ¥æˆ‘çš„ç†è§£æ‰‹æœºçš„å±å¹•é«˜åº¦çš„è®¡ç®—å…¬å¼æ˜¯: `çœŸå®é«˜åº¦ = é«˜åº¦ + çŠ¶æ€æ é«˜åº¦ + å¯¼èˆªæ é«˜åº¦`

ä»¤äººæ‚²ä¼¤ğŸ˜¢çš„æ˜¯ä¸Šé¢ç¬¦åˆæ¡ä»¶çš„åªæœ‰`MI 8`ã€‚è¿™å°±å¯¼è‡´PopWindowåœ¨åŠ¨æ€è®¡ç®—é«˜åº¦çš„æ—¶å€™éå¸¸å°´å°¬çš„ç‚¹ã€‚

